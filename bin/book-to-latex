#!perl -w
use strict;
use Pod::PseudoPod::LaTeX 1.101050;

sub papersize {
    my $papersize = `/usr/bin/paperconf`;
    if ($papersize) {
        chomp $papersize;
    }
    else {
        $papersize = $ENV{PAPERSIZE};
    }

    return $papersize || 'a4';
}

my $papersize = papersize() . 'paper';

print <<"DOCUMENTCLASS";
\\documentclass[11pt,$papersize,oneside]{report}
DOCUMENTCLASS

print <<'HEADER';
\usepackage{graphics,graphicx}
\usepackage{colortbl}
\usepackage{fancyvrb}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage[scaled]{beramono}
\usepackage[utf8]{inputenc}
 
\begin{document}
HEADER

for (@ARGV) {
    my $parser = Pod::PseudoPod::LaTeX->new();
    $parser->codes_in_verbatim(1);
    $parser->output_fh( *STDOUT );
    $parser->parse_file( $_ );
}

print <<'FOOTER';
\end{document}
FOOTER
